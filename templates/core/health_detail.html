{% extends 'base.html' %}

{% block title %}{{ guide.title_ru }} - –≠–Ω—Ü–∏–∫–ª–æ–ø–µ–¥–∏—è –ª–µ—á–µ–Ω–∏—è{% endblock %}

{% block content %}
<!-- Language Toggle (Fixed at top) -->
<div class="sticky top-16 z-40 bg-[#121212]/95 backdrop-blur-sm border-b border-gray-800 -mx-4 px-4 py-4 mb-8">
    <div class="max-w-4xl mx-auto flex justify-center gap-4">
        <button 
            onclick="switchLanguage('ru')"
            id="btn-ru"
            class="lang-btn active px-8 py-3 rounded-lg font-bold text-lg transition-all duration-300 bg-gradient-to-r from-[#D4AF37] to-[#FFD700] text-black shadow-lg shadow-[#D4AF37]/50"
        >
            üá∑üá∫ –†—É—Å—Å–∫–∏–π
        </button>
        <button 
            onclick="switchLanguage('tj')"
            id="btn-tj"
            class="lang-btn px-8 py-3 rounded-lg font-bold text-lg transition-all duration-300 bg-gray-700 text-gray-300 hover:bg-gray-600"
        >
            üáπüáØ –¢–æ“∑–∏–∫”£
        </button>
    </div>
</div>

<!-- Main Content -->
<div class="max-w-4xl mx-auto">
    <!-- Header Image -->
    <div class="relative h-96 rounded-2xl overflow-hidden mb-8 border-2 border-[#D4AF37]">
        <img 
            src="{{ guide.image.url }}" 
            alt="{{ guide.title_ru }}"
            class="w-full h-full object-cover"
        >
        <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/40 to-transparent"></div>
        
        <!-- Title Overlay -->
        <div class="absolute bottom-0 left-0 right-0 p-8">
            <h1 class="lang-content-ru text-4xl md:text-5xl font-bold gold-text mb-2">
                {{ guide.title_ru }}
            </h1>
            <h1 class="lang-content-tj hidden text-4xl md:text-5xl font-bold gold-text mb-2">
                {{ guide.title_tj }}
            </h1>
            <p class="text-gray-300 text-sm">
                üìÖ –û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ: {{ guide.created_at|date:"d M Y" }}
            </p>
        </div>
    </div>

    <!-- Description Block -->
    <div class="bg-[#1E1E1E] rounded-xl p-8 mb-6 border border-gray-800">
        <div class="flex items-start gap-4">
            <div class="text-4xl">üìñ</div>
            <div class="flex-1">
                <h2 class="text-2xl font-bold gold-text mb-4">–û–ø–∏—Å–∞–Ω–∏–µ</h2>
                <div class="lang-content-ru text-gray-300 leading-relaxed">
                    {{ guide.description_ru|linebreaks }}
                </div>
                <div class="lang-content-tj hidden text-gray-300 leading-relaxed">
                    {{ guide.description_tj|linebreaks }}
                </div>
            </div>
        </div>
    </div>

    <!-- Symptoms Block -->
    <div class="bg-gradient-to-br from-red-900/20 to-red-800/10 rounded-xl p-8 mb-6 border-2 border-red-600/30">
        <div class="flex items-start gap-4">
            <div class="text-4xl">üî¥</div>
            <div class="flex-1">
                <h2 class="text-2xl font-bold text-red-400 mb-4">–°–∏–º–ø—Ç–æ–º—ã</h2>
                <div class="lang-content-ru text-gray-300 leading-relaxed whitespace-pre-line">
                    {{ guide.symptoms_ru }}
                </div>
                <div class="lang-content-tj hidden text-gray-300 leading-relaxed whitespace-pre-line">
                    {{ guide.symptoms_tj }}
                </div>
            </div>
        </div>
    </div>

    <!-- Treatment Block -->
    <div class="bg-gradient-to-br from-green-900/20 to-green-800/10 rounded-xl p-8 mb-6 border-2 border-green-600/30">
        <div class="flex items-start gap-4">
            <div class="text-4xl">üíä</div>
            <div class="flex-1">
                <h2 class="text-2xl font-bold text-green-400 mb-4">–õ–µ—á–µ–Ω–∏–µ</h2>
                <div class="lang-content-ru text-gray-300 leading-relaxed whitespace-pre-line">
                    {{ guide.treatment_ru }}
                </div>
                <div class="lang-content-tj hidden text-gray-300 leading-relaxed whitespace-pre-line">
                    {{ guide.treatment_tj }}
                </div>
            </div>
        </div>
    </div>

    <!-- YouTube Video Block (if exists) -->
    {% if youtube_embed_url %}
    <div class="bg-[#1E1E1E] rounded-xl p-8 mb-6 border border-[#D4AF37]">
        <div class="flex items-center gap-3 mb-6">
            <div class="text-4xl">üé•</div>
            <h2 class="text-2xl font-bold gold-text">–í–∏–¥–µ–æ–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h2>
        </div>
        
        <!-- Responsive YouTube Embed -->
        <div class="relative w-full" style="padding-bottom: 56.25%;">
            <iframe 
                class="absolute top-0 left-0 w-full h-full rounded-lg"
                src="{{ youtube_embed_url }}" 
                frameborder="0" 
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                allowfullscreen>
            </iframe>
        </div>
    </div>
    {% endif %}

    <!-- Warning Block -->
    <div class="bg-yellow-900/20 border-2 border-yellow-600/50 rounded-xl p-6 mb-8">
        <div class="flex items-start gap-4">
            <div class="text-3xl">‚ö†Ô∏è</div>
            <div>
                <h3 class="text-lg font-bold text-yellow-400 mb-2">–í–∞–∂–Ω–æ–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ</h3>
                <p class="text-gray-300 leading-relaxed">
                    –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞ –≤ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ü–µ–ª—è—Ö. –ü—Ä–∏ —Å–µ—Ä—å—ë–∑–Ω—ã—Ö —Å–∏–º–ø—Ç–æ–º–∞—Ö 
                    –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—É. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ª–µ—á–µ–Ω–∏–µ 
                    –º–æ–∂–µ—Ç —É—Ö—É–¥—à–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ç–∏—Ü—ã.
                </p>
            </div>
        </div>
    </div>

    <!-- Back Button -->
    <div class="text-center">
        <a href="{% url 'health_list' %}" 
           class="inline-block px-8 py-4 bg-gradient-to-r from-[#D4AF37] to-[#FFD700] text-black font-bold text-lg rounded-xl hover:from-[#FFD700] hover:to-[#D4AF37] transition-all duration-300 shadow-lg shadow-[#D4AF37]/50 hover:shadow-[#FFD700]/60 hover:scale-105">
            ‚Üê –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ —Å–ø–∏—Å–∫—É
        </a>
    </div>
</div>

<!-- Language Switcher Script -->
<script>
    function switchLanguage(lang) {
        // Hide all content
        document.querySelectorAll('.lang-content-ru, .lang-content-tj').forEach(el => {
            el.classList.add('hidden');
        });
        
        // Show selected language content
        document.querySelectorAll('.lang-content-' + lang).forEach(el => {
            el.classList.remove('hidden');
        });
        
        // Update button styles
        const btnRu = document.getElementById('btn-ru');
        const btnTj = document.getElementById('btn-tj');
        
        if (lang === 'ru') {
            btnRu.classList.add('bg-gradient-to-r', 'from-[#D4AF37]', 'to-[#FFD700]', 'text-black', 'shadow-lg', 'shadow-[#D4AF37]/50');
            btnRu.classList.remove('bg-gray-700', 'text-gray-300');
            
            btnTj.classList.remove('bg-gradient-to-r', 'from-[#D4AF37]', 'to-[#FFD700]', 'text-black', 'shadow-lg', 'shadow-[#D4AF37]/50');
            btnTj.classList.add('bg-gray-700', 'text-gray-300');
        } else {
            btnTj.classList.add('bg-gradient-to-r', 'from-[#D4AF37]', 'to-[#FFD700]', 'text-black', 'shadow-lg', 'shadow-[#D4AF37]/50');
            btnTj.classList.remove('bg-gray-700', 'text-gray-300');
            
            btnRu.classList.remove('bg-gradient-to-r', 'from-[#D4AF37]', 'to-[#FFD700]', 'text-black', 'shadow-lg', 'shadow-[#D4AF37]/50');
            btnRu.classList.add('bg-gray-700', 'text-gray-300');
        }
        
        // Save preference to localStorage
        localStorage.setItem('healthGuideLanguage', lang);
    }
    
    // Load saved language preference on page load
    document.addEventListener('DOMContentLoaded', function() {
        const savedLang = localStorage.getItem('healthGuideLanguage') || 'ru';
        switchLanguage(savedLang);
    });
</script>
{% endblock %}
