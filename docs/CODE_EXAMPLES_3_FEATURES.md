# üìö –ü–†–ò–ú–ï–†–´ –ö–û–î–ê - –í–°–ï 3 –§–£–ù–ö–¶–ò–ò

## 1Ô∏è‚É£ –í–ù–£–¢–†–ï–ù–ù–ò–ô –ö–û–®–ï–õ–ï–ö - –ü–†–ò–ú–ï–†–´

### –ü—Ä–∏–º–µ—Ä 1.1: –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```python
# –í views.py –∏–ª–∏ management command
from django.contrib.auth.models import User

user = User.objects.get(username='john_doe')
user.profile.add_balance(100, "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É")
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- –ë–∞–ª–∞–Ω—Å —É–≤–µ–ª–∏—á–∏—Ç—Å—è –Ω–∞ 100 TJS
- –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ Transaction
- type: 'add'
- description: "–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É"

---

### –ü—Ä–∏–º–µ—Ä 1.2: –°–ø–∏—Å–∞—Ç—å —Å–æ —Å—á–µ—Ç–∞ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π

```python
from decimal import Decimal

try:
    user.profile.deduct_balance(Decimal('50.00'))
    print(f"‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–ø–∏—Å–∞–Ω–æ. –ù–æ–≤—ã–π –±–∞–ª–∞–Ω—Å: {user.profile.balance}")
except ValueError as e:
    print(f"‚ùå –û—à–∏–±–∫–∞: {e}")  # "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤..."
```

---

### –ü—Ä–∏–º–µ—Ä 1.3: –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

```python
from core.models import Transaction

# –í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
user_transactions = Transaction.objects.filter(user=user).order_by('-created_at')

for transaction in user_transactions:
    print(f"""
    –î–∞—Ç–∞: {transaction.created_at.strftime('%d.%m.%Y %H:%M')}
    –¢–∏–ø: {transaction.get_transaction_type_display()}
    –°—É–º–º–∞: {transaction.amount} TJS
    –û–ø–∏—Å–∞–Ω–∏–µ: {transaction.description}
    """)
```

**–í—ã–≤–æ–¥:**
```
–î–∞—Ç–∞: 26.01.2026 14:30
–¢–∏–ø: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
–°—É–º–º–∞: 100.00 TJS
–û–ø–∏—Å–∞–Ω–∏–µ: –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –ø–ª–∞—Ç–µ–∂–Ω—É—é —Å–∏—Å—Ç–µ–º—É

–î–∞—Ç–∞: 26.01.2026 13:45
–¢–∏–ø: –°–ø–∏—Å–∞–Ω–∏–µ
–°—É–º–º–∞: 50.00 TJS
–û–ø–∏—Å–∞–Ω–∏–µ: –°–ø–∏—Å–∞–Ω–∏–µ —Å–æ —Å—á–µ—Ç–∞
```

---

### –ü—Ä–∏–º–µ—Ä 1.4: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —à–∞–±–ª–æ–Ω–µ

```django
{% load static %}

<!-- –ü–æ–∫–∞–∑–∞—Ç—å –±–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞ -->
<div class="wallet-balance">
    <span class="label">üí∞ –í–∞—à –±–∞–ª–∞–Ω—Å:</span>
    <span class="amount">{{ user.profile.balance }} TJS</span>
</div>

<!-- –ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 5 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π -->
<div class="transaction-history">
    <h3>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</h3>
    <table>
        <thead>
            <tr>
                <th>–î–∞—Ç–∞</th>
                <th>–¢–∏–ø</th>
                <th>–°—É–º–º–∞</th>
                <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
            </tr>
        </thead>
        <tbody>
            {% for transaction in user.transactions.all|slice:":5" %}
            <tr>
                <td>{{ transaction.created_at|date:"d.m.Y H:i" }}</td>
                <td>{{ transaction.get_transaction_type_display }}</td>
                <td>{{ transaction.amount }} TJS</td>
                <td>{{ transaction.description }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
```

---

### –ü—Ä–∏–º–µ—Ä 1.5: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–æ–º –≤ –∞–¥–º–∏–Ω–∫–µ

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É: `/control_panel_secret_7828/`
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π"
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, "john_doe")
4. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "üí≥ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å"
5. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É:
   - –°—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è: `500.00`
   - –û–ø–∏—Å–∞–Ω–∏–µ: `–í–æ–∑–≤—Ä–∞—Ç –∑–∞ –æ—Ç–º–µ–Ω—É –∑–∞–∫–∞–∑–∞`
6. –ù–∞–∂–º–∏—Ç–µ "‚úÖ –ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å"
7. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏" —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞–ø–∏—Å—å

---

## 2Ô∏è‚É£ –ú–£–õ–¨–¢–ò–Ø–ó–´–ß–ù–û–°–¢–¨ - –ü–†–ò–ú–ï–†–´

### –ü—Ä–∏–º–µ—Ä 2.1: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥ –≤ –º–æ–¥–µ–ª—å

```python
# core/models.py
from django.utils.translation import gettext_lazy as _

class Animal(models.Model):
    category = models.CharField(
        max_length=50,
        choices=CATEGORY_CHOICES,
        verbose_name=_('–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ'),  # ‚Üê –ü–µ—Ä–µ–≤–æ–¥–∏–º–æ
        help_text=_('–í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ'),
        db_index=True
    )
    
    title = models.CharField(
        max_length=200,
        verbose_name=_('–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è'),  # ‚Üê –ü–µ—Ä–µ–≤–æ–¥–∏–º–æ
        help_text=_('–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è')
    )
    
    price = models.DecimalField(
        max_digits=10,
        decimal_places=2,
        verbose_name=_('–¶–µ–Ω–∞ –≤ —Å–æ–º–æ–Ω–∏'),  # ‚Üê –ü–µ—Ä–µ–≤–æ–¥–∏–º–æ
        help_text=_('–£–∫–∞–∂–∏—Ç–µ —Ü–µ–Ω—É –≤ TJS')
    )
```

---

### –ü—Ä–∏–º–µ—Ä 2.2: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥ –≤ —à–∞–±–ª–æ–Ω

```django
{% load i18n %}

<!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
<h1>{% trans "–î–æ–±–∞–≤–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ" %}</h1>

<!-- –ü–æ–ª—è —Ñ–æ—Ä–º—ã -->
<form method="post">
    {% csrf_token %}
    
    <label>{% trans "–ù–∞–∑–≤–∞–Ω–∏–µ" %}</label>
    <input type="text" name="title" required>
    
    <label>{% trans "–û–ø–∏—Å–∞–Ω–∏–µ" %}</label>
    <textarea name="description" required></textarea>
    
    <label>{% trans "–¶–µ–Ω–∞ (TJS)" %}</label>
    <input type="number" name="price" step="0.01" required>
    
    <button type="submit">{% trans "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" %}</button>
</form>

<!-- –° –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ -->
<p>{% blocktrans with name=animal.title %}
    –í—ã —Å–º–æ—Ç—Ä–∏—Ç–µ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ: {{ name }}
{% endblocktrans %}</p>

<!-- –° –ø–ª—é—Ä–∞–ª–∏–∑–∞—Ü–∏–µ–π -->
{% blocktrans count counter=animals_count %}
    –£ –≤–∞—Å –µ—Å—Ç—å {{ counter }} –æ–±—ä—è–≤–ª–µ–Ω–∏–µ
{% plural %}
    –£ –≤–∞—Å –µ—Å—Ç—å {{ counter }} –æ–±—ä—è–≤–ª–µ–Ω–∏–π
{% endblocktrans %}
```

---

### –ü—Ä–∏–º–µ—Ä 2.3: –î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥ –≤ forms.py

```python
# core/forms.py
from django import forms
from django.utils.translation import gettext_lazy as _
from .models import Animal

class AnimalForm(forms.ModelForm):
    class Meta:
        model = Animal
        fields = ['category', 'title', 'description', 'price', 'city']
        labels = {
            'category': _('–ö–∞—Ç–µ–≥–æ—Ä–∏—è'),
            'title': _('–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è'),
            'description': _('–û–ø–∏—Å–∞–Ω–∏–µ'),
            'price': _('–¶–µ–Ω–∞ (TJS)'),
            'city': _('–ì–æ—Ä–æ–¥'),
        }
        help_texts = {
            'category': _('–í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ'),
            'title': _('–ö—Ä–∞—Ç–∫–æ–µ –∏ –ø–æ–Ω—è—Ç–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ'),
            'price': _('–¶–µ–Ω–∞ –≤ —Å–æ–º–æ–Ω–∏'),
        }
    
    def __init__(self, *args, **kwargs):
        super().__init__(*args, **kwargs)
        self.fields['category'].label = _('–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ')
```

---

### –ü—Ä–∏–º–µ—Ä 2.4: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤ –≤ –º–µ–Ω—é

**–£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ templates/base.html:**

```django
<!-- –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —è–∑—ã–∫–æ–≤ -->
<div class="flex items-center space-x-1 border-l border-gray-700 pl-4">
    <form action="{% url 'set_language' %}" method="post" style="display: inline;">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.path }}">
        <button type="submit" name="language" value="ru"
            class="px-2 py-1 {% if LANGUAGE_CODE == 'ru' %}text-[#D4AF37] font-bold{% else %}text-gray-400{% endif %}">
            üá∑üá∫ RU
        </button>
    </form>
    <span class="text-gray-600">|</span>
    <form action="{% url 'set_language' %}" method="post" style="display: inline;">
        {% csrf_token %}
        <input type="hidden" name="next" value="{{ request.path }}">
        <button type="submit" name="language" value="tg"
            class="px-2 py-1 {% if LANGUAGE_CODE == 'tg' %}text-[#D4AF37] font-bold{% else %}text-gray-400{% endif %}">
            üáπüáØ TJ
        </button>
    </form>
</div>
```

---

### –ü—Ä–∏–º–µ—Ä 2.5: –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
python manage.py makemessages -l ru
python manage.py makemessages -l tg

# –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ñ–∞–π–ª: locale/tg/LC_MESSAGES/django.po
# –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–µ—Ä–µ–≤–æ–¥—ã:

#: core/models.py:120
msgid "–ö–∞—Ç–µ–≥–æ—Ä–∏—è –∂–∏–≤–æ—Ç–Ω–æ–≥–æ"
msgstr "–ö–∞—Ç–µ–≥–æ—Ä–∏—è–∏ “≥–∞–π–≤–æ–Ω"

#: core/models.py:125
msgid "–ù–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è"
msgstr "–ù–æ–º–∏ —ç—ä–ª–æ–Ω–∏"

#: core/models.py:130
msgid "–¶–µ–Ω–∞ (TJS)"
msgstr "–ù–∞—Ä—Ö (TJS)"

# –°–∫–æ–º–ø–∏–ª–∏—Ä—É–µ–º –ø–µ—Ä–µ–≤–æ–¥—ã
python manage.py compilemessages
```

---

## 3Ô∏è‚É£ –í–û–î–Ø–ù–û–ô –ó–ù–ê–ö - –ü–†–ò–ú–ï–†–´

### –ü—Ä–∏–º–µ—Ä 3.1: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

```python
# core/models.py - —ç—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ!

class Animal(models.Model):
    main_photo = models.ImageField(
        upload_to='animals/%Y/%m/',
        verbose_name='–ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ'
    )
    
    def save(self, *args, **kwargs):
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Ñ–æ—Ç–æ
        if self.main_photo:
            # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫
            self._add_watermark()
        
        super().save(*args, **kwargs)
    
    def _add_watermark(self):
        """–î–æ–±–∞–≤–∏—Ç—å –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ 'ZooBozor'"""
        from PIL import Image, ImageDraw, ImageFont
        # ... –ø–æ–ª–Ω—ã–π –∫–æ–¥ –≤ models.py
```

---

### –ü—Ä–∏–º–µ—Ä 3.2: –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

**–®–∞–≥–∏:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É ‚Üí –ñ–∏–≤–æ—Ç–Ω—ã–µ
2. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ"
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ü–µ–Ω–∞ –∏ —Ç.–¥.)
4. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –≤ –ø–æ–ª–µ "–ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ"
5. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"
6. **–í–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ –¥–æ–±–∞–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!**
7. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ç–æ - —É–≤–∏–¥–∏—Ç–µ "ZooBozor" –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É

---

### –ü—Ä–∏–º–µ—Ä 3.3: –ó–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É —Å–∞–π—Ç–∞

```django
<!-- templates/core/add_animal.html -->
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    
    <label>{% trans "–ì–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ç–æ" %}</label>
    <input type="file" name="main_photo" accept="image/*" required>
    
    <button type="submit">{% trans "–ó–∞–≥—Ä—É–∑–∏—Ç—å" %}</button>
</form>
```

```python
# core/views.py
from django.shortcuts import render, redirect
from .models import Animal
from .forms import AnimalForm

def add_animal(request):
    if request.method == 'POST':
        form = AnimalForm(request.POST, request.FILES)
        if form.is_valid():
            animal = form.save(commit=False)
            animal.owner = request.user
            animal.save()
            # –í–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ –¥–æ–±–∞–≤–∏—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ save()!
            return redirect('animal_detail', pk=animal.pk)
    else:
        form = AnimalForm()
    
    return render(request, 'core/add_animal.html', {'form': form})
```

---

### –ü—Ä–∏–º–µ—Ä 3.4: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞

```python
# –í–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ –∏–º–µ–µ—Ç —ç—Ç–∏ —Å–≤–æ–π—Å—Ç–≤–∞:

# üìç –ü–û–ó–ò–¶–ò–Ø: –ü—Ä–∞–≤—ã–π –Ω–∏–∂–Ω–∏–π —É–≥–æ–ª
x = watermarked.width - text_width - 20  # 20 –ø–∏–∫—Å–µ–ª–µ–π –æ—Ç –∫—Ä–∞—è

# üé® –¶–í–ï–¢ –¢–ï–ö–°–¢–ê: –ë–µ–ª—ã–π —Å 50% –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é
text_color = (255, 255, 255, 128)  # RGB + Alpha (128 = 50%)

# üåë –¢–ï–ù–¨: –ß–µ—Ä–Ω–∞—è –¥–ª—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞
shadow_color = (0, 0, 0, 80)  # –ß–µ—Ä–Ω—ã–π –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π

# üî§ –®–†–ò–§–¢: Arial –∏–ª–∏ Liberation Sans
font_size = int(watermarked.width / 15)  # –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–æ—Ç–æ

# üìê –†–ê–ó–ú–ï–†–´ –§–û–¢–û: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è
# –†–∞–∑–º–µ—Ä —Ç–µ–∫—Å—Ç–∞ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø–æ–¥ —Ñ–æ—Ç–æ
# –ú–∞–ª–µ–Ω—å–∫–æ–µ —Ñ–æ—Ç–æ = –º–µ–Ω—å—à–∏–π —Ç–µ–∫—Å—Ç
# –ë–æ–ª—å—à–æ–µ —Ñ–æ—Ç–æ = –±–æ–ª—å—à–∏–π —Ç–µ–∫—Å—Ç
```

---

### –ü—Ä–∏–º–µ—Ä 3.5: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

```python
# –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –∫–æ–¥ –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è:

def _add_watermark(self):
    try:
        # ... –∫–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ ...
        pass
    except Exception as e:
        # –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - –ø—Ä–æ—Å—Ç–æ –ª–æ–≥–∏—Ä—É–µ–º –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
        print(f"–û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞: {str(e)}")
        pass  # –§–æ—Ç–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—Å—è –ë–ï–ó –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞, –Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è

# –†–ï–ó–£–õ–¨–¢–ê–¢:
# ‚úÖ –ï—Å–ª–∏ –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç - —Ñ–æ—Ç–æ —Å "ZooBozor"
# ‚úÖ –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ - —Ñ–æ—Ç–æ –±–µ–∑ –≤–æ–¥—è–Ω–æ–≥–æ –∑–Ω–∞–∫–∞ (–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è!)
# ‚ùå –û—à–∏–±–∫–∏ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï - –í–°–ï 3 –§–£–ù–ö–¶–ò–ò

### –¢–µ—Å—Ç 1: –ö–æ—à–µ–ª–µ–∫

```python
# –í Django Shell:
python manage.py shell

from django.contrib.auth.models import User
from core.models import Transaction

user = User.objects.get(username='test_user')

# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
print(f"–ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å: {user.profile.balance}")

# 2. –ü–æ–ø–æ–ª–Ω–∏—Ç—å
user.profile.add_balance(100, "–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ")
print(f"–ü–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è: {user.profile.balance}")

# 3. –°–ø–∏—Å–∞—Ç—å
user.profile.deduct_balance(30)
print(f"–ü–æ—Å–ª–µ —Å–ø–∏—Å–∞–Ω–∏—è: {user.profile.balance}")

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
for t in user.transactions.all():
    print(f"{t.get_transaction_type_display()}: {t.amount}")

# 5. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–ø–∏—Å–∞—Ç—å –±–æ–ª—å—à–µ, —á–µ–º –µ—Å—Ç—å
try:
    user.profile.deduct_balance(999)
except ValueError as e:
    print(f"‚úÖ –û—à–∏–±–∫–∞ –ø–æ–π–º–∞–Ω–∞: {e}")
```

---

### –¢–µ—Å—Ç 2: –ú—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
http://localhost:8000/

# 2. –ù–∞–∂–º–∏—Ç–µ "üá∑üá∫ RU" –≤ –º–µ–Ω—é - —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–æ–º
# 3. –ù–∞–∂–º–∏—Ç–µ "üáπüáØ TJ" - —Ç–µ–∫—Å—Ç –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è (–µ—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥—ã –≥–æ—Ç–æ–≤—ã)
# 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ URL - –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è:
# http://localhost:8000/en/  (–∞–Ω–≥–ª–∏–π—Å–∫–∏–π, –µ—Å–ª–∏ –¥–æ–±–∞–≤–ª–µ–Ω)
# http://localhost:8000/tg/  (—Ç–∞–¥–∂–∏–∫—Å–∫–∏–π)
# http://localhost:8000/ru/  (—Ä—É—Å—Å–∫–∏–π)

# 5. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É –ø—Ä–∏ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö
# /control_panel_secret_7828/ - –¥–æ–ª–∂–Ω–∞ –º–µ–Ω—è—Ç—å —è–∑—ã–∫
```

---

### –¢–µ—Å—Ç 3: –í–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫

```bash
# 1. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É
# http://localhost:8000/control_panel_secret_7828/

# 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–ñ–∏–≤–æ—Ç–Ω—ã–µ"
# 3. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –∂–∏–≤–æ—Ç–Ω–æ–µ"
# 4. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–æ—Ä–º—É
# 5. –ó–∞–≥—Ä—É–∑—å—Ç–µ –ª—é–±–æ–µ —Ñ–æ—Ç–æ (JPG, PNG)
# 6. –ù–∞–∂–º–∏—Ç–µ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å"

# 7. –û—Ç–∫—Ä–æ–π—Ç–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ —Ñ–æ—Ç–æ
# 8. –í –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –Ω–∞–¥–ø–∏—Å—å "ZooBozor"
# 9. –¢–µ–∫—Å—Ç –±–µ–ª—ã–π —Å —á–µ—Ä–Ω–æ–π —Ç–µ–Ω—å—é
# 10. –¢–µ–∫—Å—Ç –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∏ —á–∏—Ç–∞–µ—Ç—Å—è

# –ï–°–õ–ò –ß–¢–û-–¢–û –ù–ï –°–†–ê–ë–û–¢–ê–õ–û:
# - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å: –µ—Å—Ç—å –ª–∏ –æ—à–∏–±–∫–∏
# - –£–±–µ–¥–∏—Ç–µ—Å—å Pillow —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: pip install Pillow
# - –§–æ—Ç–æ –≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è, –¥–∞–∂–µ –µ—Å–ª–∏ –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–ª
```

---

## üìö –ò–¢–û–ì–û–í–´–ô –ß–ï–ö-–õ–ò–°–¢

- [ ] –ó–∞–ø—É—Å—Ç–∏–ª `python manage.py makemigrations`
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª `python manage.py migrate`
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª `python manage.py runserver`
- [ ] –û—Ç–∫—Ä—ã–ª –±—Ä–∞—É–∑–µ—Ä –Ω–∞ http://localhost:8000
- [ ] –ü–µ—Ä–µ–∫–ª—é—á–∏–ª—Å—è –º–µ–∂–¥—É RU –∏ TJ –≤ –º–µ–Ω—é ‚úÖ
- [ ] –û—Ç–∫—Ä—ã–ª –∞–¥–º–∏–Ω–∫—É `/control_panel_secret_7828/` 
- [ ] –ü–æ–ø–æ–ª–Ω–∏–ª –±–∞–ª–∞–Ω—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –∏—Å—Ç–æ—Ä–∏—é –≤ —Ä–∞–∑–¥–µ–ª–µ "–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏"
- [ ] –ó–∞–≥—Ä—É–∑–∏–ª —Ñ–æ—Ç–æ –∂–∏–≤–æ—Ç–Ω–æ–≥–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –≤–æ–¥—è–Ω–æ–π –∑–Ω–∞–∫ –Ω–∞ —Ñ–æ—Ç–æ ‚úÖ
- [ ] –°–æ–∑–¥–∞–ª –ø–µ—Ä–µ–≤–æ–¥—ã —á–µ—Ä–µ–∑ `makemessages -l tg`
- [ ] –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–ª `locale/tg/LC_MESSAGES/django.po`
- [ ] –°–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–ª –ø–µ—Ä–µ–≤–æ–¥—ã —á–µ—Ä–µ–∑ `compilemessages`

---

**–í–°–ï –ü–†–ò–ú–ï–†–´ –ì–û–¢–û–í–´ –ö –ò–°–ü–û–õ–¨–ó–û–í–ê–ù–ò–Æ!** üéâ

–ö–æ–ø–∏—Ä—É–π—Ç–µ, –≤—Å—Ç–∞–≤–ª—è–π—Ç–µ –∏ —Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ! üöÄ

---

–í–µ—Ä—Å–∏—è: 1.0  
–î–∞—Ç–∞: 26.01.2026  
–°—Ç–∞—Ç—É—Å: ‚úÖ –ì–û–¢–û–í–û
